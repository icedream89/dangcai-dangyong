{"version":3,"file":"user.js","sources":["store/user.js"],"sourcesContent":["// 用户状态管理\nconst USER_KEY = 'user_info'\n\nexport const userStore = {\n  state: {\n    userInfo: null,\n    isLoggedIn: false\n  },\n\n  // 初始化用户状态\n  init() {\n    try {\n      const userInfo = uni.getStorageSync(USER_KEY)\n      if (userInfo) {\n        this.state.userInfo = JSON.parse(userInfo)\n        this.state.isLoggedIn = true\n      }\n    } catch (e) {\n      console.error('初始化用户状态失败', e)\n    }\n  },\n\n  // 登录\n  login(userInfo) {\n    this.state.userInfo = userInfo\n    this.state.isLoggedIn = true\n    try {\n      uni.setStorageSync(USER_KEY, JSON.stringify(userInfo))\n    } catch (e) {\n      console.error('保存用户信息失败', e)\n    }\n  },\n\n  // 登出\n  logout() {\n    this.state.userInfo = null\n    this.state.isLoggedIn = false\n    try {\n      uni.removeStorageSync(USER_KEY)\n    } catch (e) {\n      console.error('清除用户信息失败', e)\n    }\n  },\n\n  // 更新用户信息\n  updateUserInfo(newInfo) {\n    if (this.state.userInfo) {\n      this.state.userInfo = { ...this.state.userInfo, ...newInfo }\n      try {\n        uni.setStorageSync(USER_KEY, JSON.stringify(this.state.userInfo))\n      } catch (e) {\n        console.error('更新用户信息失败', e)\n      }\n    }\n  },\n\n  // 判断是否为企业用户\n  isEnterpriseUser() {\n    return this.state.userInfo && this.state.userInfo.role === 'enterprise'\n  },\n\n  // 判断是否为企业员工\n  isEnterpriseEmployee() {\n    return this.state.userInfo && this.state.userInfo.role === 'employee'\n  },\n\n  // 判断是否可以编辑企业信息\n  canEditEnterprise() {\n    return this.isEnterpriseUser() || this.isEnterpriseEmployee()\n  },\n\n  // 获取当前用户所属企业ID\n  getEnterpriseId() {\n    return this.state.userInfo ? this.state.userInfo.enterpriseId : null\n  }\n}\n\n// Mock 数据 - 用户账户\nexport const mockUsers = [\n  {\n    id: 1,\n    name: '企业管理员',\n    phone: '13800138001',\n    role: 'enterprise', // 企业管理员\n    enterpriseId: 1,\n    enterpriseName: '当阳市科技有限公司'\n  },\n  {\n    id: 2,\n    name: '企业员工',\n    phone: '13800138002',\n    role: 'employee', // 企业员工\n    enterpriseId: 1,\n    enterpriseName: '当阳市科技有限公司'\n  },\n  {\n    id: 3,\n    name: '普通用户',\n    phone: '13800138003',\n    role: 'normal' // 普通用户\n  }\n]\n"],"names":["uni"],"mappings":";;AACA,MAAM,WAAW;AAEL,MAAC,YAAY;AAAA,EACvB,OAAO;AAAA,IACL,UAAU;AAAA,IACV,YAAY;AAAA,EACb;AAAA;AAAA,EAGD,OAAO;AACL,QAAI;AACF,YAAM,WAAWA,cAAAA,MAAI,eAAe,QAAQ;AAC5C,UAAI,UAAU;AACZ,aAAK,MAAM,WAAW,KAAK,MAAM,QAAQ;AACzC,aAAK,MAAM,aAAa;AAAA,MACzB;AAAA,IACF,SAAQ,GAAG;AACVA,oBAAAA,MAAc,MAAA,SAAA,uBAAA,aAAa,CAAC;AAAA,IAC7B;AAAA,EACF;AAAA;AAAA,EAGD,MAAM,UAAU;AACd,SAAK,MAAM,WAAW;AACtB,SAAK,MAAM,aAAa;AACxB,QAAI;AACFA,oBAAG,MAAC,eAAe,UAAU,KAAK,UAAU,QAAQ,CAAC;AAAA,IACtD,SAAQ,GAAG;AACVA,oBAAAA,MAAA,MAAA,SAAA,uBAAc,YAAY,CAAC;AAAA,IAC5B;AAAA,EACF;AAAA;AAAA,EAGD,SAAS;AACP,SAAK,MAAM,WAAW;AACtB,SAAK,MAAM,aAAa;AACxB,QAAI;AACFA,oBAAG,MAAC,kBAAkB,QAAQ;AAAA,IAC/B,SAAQ,GAAG;AACVA,oBAAAA,MAAA,MAAA,SAAA,uBAAc,YAAY,CAAC;AAAA,IAC5B;AAAA,EACF;AAAA;AAAA,EAGD,eAAe,SAAS;AACtB,QAAI,KAAK,MAAM,UAAU;AACvB,WAAK,MAAM,WAAW,EAAE,GAAG,KAAK,MAAM,UAAU,GAAG,QAAS;AAC5D,UAAI;AACFA,4BAAI,eAAe,UAAU,KAAK,UAAU,KAAK,MAAM,QAAQ,CAAC;AAAA,MACjE,SAAQ,GAAG;AACVA,sBAAAA,4CAAc,YAAY,CAAC;AAAA,MAC5B;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAGD,mBAAmB;AACjB,WAAO,KAAK,MAAM,YAAY,KAAK,MAAM,SAAS,SAAS;AAAA,EAC5D;AAAA;AAAA,EAGD,uBAAuB;AACrB,WAAO,KAAK,MAAM,YAAY,KAAK,MAAM,SAAS,SAAS;AAAA,EAC5D;AAAA;AAAA,EAGD,oBAAoB;AAClB,WAAO,KAAK,sBAAsB,KAAK,qBAAsB;AAAA,EAC9D;AAAA;AAAA,EAGD,kBAAkB;AAChB,WAAO,KAAK,MAAM,WAAW,KAAK,MAAM,SAAS,eAAe;AAAA,EACjE;AACH;AAGY,MAAC,YAAY;AAAA,EACvB;AAAA,IACE,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,OAAO;AAAA,IACP,MAAM;AAAA;AAAA,IACN,cAAc;AAAA,IACd,gBAAgB;AAAA,EACjB;AAAA,EACD;AAAA,IACE,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,OAAO;AAAA,IACP,MAAM;AAAA;AAAA,IACN,cAAc;AAAA,IACd,gBAAgB;AAAA,EACjB;AAAA,EACD;AAAA,IACE,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,OAAO;AAAA,IACP,MAAM;AAAA;AAAA,EACP;AACH;;;"}